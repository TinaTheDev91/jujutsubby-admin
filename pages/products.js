import Layout from "@/components/Layout";
import Link from "next/link";
import { useEffect, useState } from "react";
import axios from "axios";

export default function Products() {
    const [products,setProducts] = useState([]);
    useEffect(() => {
        axios.get('/api/products').then(response => {
            // console.log(response.data)
            setProducts(response.data);
        });
    }, [])
    return (
        <Layout>
            <Link className="bg-blue-900 text-white rounded-md py-1 px-2 " href={'/products/new'}>Add New Product</Link>
            <table className="basic mt-2">
                <thead>
                    <tr>
                        <td>Product Name</td>
                        <td></td>
                    </tr>
                </thead>
                <tbody>
                    {products.map(product => (
                        <tr>
                            <td>{product.title}</td>
                            <td>
                                <Link href={'/products/edit/'+product._id}>
                                <svg xmlns="http://www.w3.org/2000/svg" 
                                    x="0px" y="0px" 
                                    width="100" height="100" 
                                    viewBox="0 0 64 64"
                                    className="w-4 h-4">
                                    <linearGradient id="zLNDYKC~wmLHBQLHuIXMta_56347_gr1" x1="31.994" x2="31.994" y1="7.125" y2="57.081" gradientUnits="userSpaceOnUse" spreadMethod="reflect"><stop offset="0" stop-color="#1a6dff"></stop><stop offset="1" stop-color="#c822ff"></stop></linearGradient><path fill="url(#zLNDYKC~wmLHBQLHuIXMta_56347_gr1)" d="M55.982,13.567l-5.549-5.549c-1.3-1.299-3.566-1.299-4.865,0L42,11.586l-0.567-0.567 c-1.3-1.299-3.566-1.299-4.865,0l-0.614,0.614c-1.324-0.891-3.233-0.767-4.385,0.385l-0.551,0.55 c-1.192,1.194-1.317,3.049-0.388,4.389L10.703,36.884c-1.061,1.061-1.763,2.462-1.978,3.945L7.054,52.358 c-0.005,0.035-0.008,0.07-0.009,0.105C7.018,52.64,7,52.817,7,53c0,2.206,1.794,4,4,4c0.154,0,0.304-0.016,0.469-0.038 c0.042-0.001,0.083-0.004,0.125-0.011l11.576-1.676c1.485-0.215,2.887-0.918,3.946-1.979l19.926-19.925 c0.572,0.398,1.247,0.617,1.958,0.617c0.919,0,1.783-0.358,2.432-1.007l0.551-0.55c1.192-1.194,1.318-3.048,0.388-4.389l0.612-0.611 c1.34-1.342,1.34-3.523,0-4.865L52.414,22l3.568-3.567C57.323,17.091,57.323,14.909,55.982,13.567z M40.018,12.433l11.549,11.549 c0.562,0.562,0.562,1.476,0,2.037L51,26.586L37.414,13l0.568-0.568C38.525,11.888,39.474,11.888,40.018,12.433z M11.394,54.96 c-0.043,0.001-0.086,0.005-0.128,0.011C11.178,54.983,11.091,55,11,55c-1.103,0-2-0.897-2-2c0-0.112,0.018-0.221,0.036-0.328 c0.008-0.045,0.012-0.091,0.013-0.137l0.261-1.802c1.742,0.799,3.157,2.214,3.956,3.955L11.394,54.96z M22.884,53.297l-7.581,1.097 c-1.013-2.598-3.098-4.683-5.697-5.697l1.099-7.581c0.022-0.15,0.066-0.296,0.102-0.443c6.058,1.68,10.843,6.465,12.521,12.522 C23.179,53.231,23.034,53.275,22.884,53.297z M25.702,51.883c-0.165,0.166-0.347,0.314-0.534,0.454 c-1.913-6.473-7.032-11.592-13.505-13.505c0.14-0.187,0.288-0.368,0.453-0.534L32,18.414L45.586,32L25.702,51.883z M50.568,31.018 l-0.551,0.55c-0.543,0.545-1.492,0.545-2.036,0L32.433,16.019c-0.562-0.562-0.562-1.476-0.001-2.036l0.55-0.549 c0-0.001,0-0.001,0-0.001c0.272-0.272,0.634-0.422,1.018-0.422s0.746,0.149,1.018,0.422l15.549,15.549 C51.129,29.543,51.129,30.457,50.568,31.018z M16.707,27.707l-1.414-1.414l11-11l1.414,1.414L16.707,27.707z M35.531,31.46 l-2.991-2.99c-0.301-0.302-0.7-0.468-1.125-0.468c0,0,0,0-0.001,0c-0.425,0-0.825,0.166-1.125,0.467l-5.819,5.819 c-0.301,0.301-0.467,0.7-0.467,1.126c0,0.425,0.166,0.824,0.466,1.126l2.991,2.99c0.3,0.302,0.7,0.468,1.125,0.468c0,0,0,0,0.001,0 c0.425,0,0.825-0.166,1.125-0.467l5.819-5.819c0.301-0.301,0.467-0.7,0.467-1.126C35.998,32.161,35.832,31.762,35.531,31.46z M28.586,37.828l-2.415-2.414l1.914-1.914l2.414,2.414L28.586,37.828z M31.914,34.5L29.5,32.086l1.914-1.914l2.415,2.414 L31.914,34.5z"></path><linearGradient id="zLNDYKC~wmLHBQLHuIXMtb_56347_gr2" x1="49.201" x2="49.201" y1="9.043" y2="20.604" gradientUnits="userSpaceOnUse" spreadMethod="reflect"><stop offset="0" stop-color="#6dc7ff"></stop><stop offset="1" stop-color="#e6abff"></stop></linearGradient><path fill="url(#zLNDYKC~wmLHBQLHuIXMtb_56347_gr2)" d="M54.568,17.019L51,20.586L43.414,13l3.568-3.567c0.543-0.545,1.492-0.545,2.036,0l5.549,5.549 C55.129,15.543,55.129,16.457,54.568,17.019z"></path>
                                </svg>
                                Edit
                                </Link>
                            </td>
                        </tr>
                    ))}
                </tbody>
            </table>
        </Layout>
    );
}